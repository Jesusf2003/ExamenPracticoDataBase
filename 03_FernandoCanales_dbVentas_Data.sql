-- Borrar base de datos  si no existe
DROP DATABASE IF EXISTS VENTAS;

-- Crear base de datos
CREATE DATABASE VENTAS;

-- USar base de datos
USE VENTAS;

-- Crear tabla cliente
CREATE TABLE CUSTOMER(
	CUSTNO			CHAR(8),
    CUSTFNAME		VARCHAR(50) NOT NULL,
    CUSTLNAME		VARCHAR(50) NOT NULL,
    CUSTCITY		VARCHAR(40),
    CUSTSTATE		CHAR(2),
    CUSTZIP			CHAR(10),
    CUSTBAL			DECIMAL(4,3),
    CONSTRAINT CUSTNO PRIMARY KEY (CUSTNO)
);

-- Insertar datos
INSERT INTO CUSTOMER (CUSTNO, CUSTFNAME, CUSTLNAME, CUSTCITY, CUSTSTATE, CUSTZIP, CUSTBAL) VALUES("C0954327", "Sheri", "Gordon", "Littleton", "CO", "80129-5543", 230.00);
INSERT INTO CUSTOMER (CUSTNO, CUSTFNAME, CUSTLNAME, CUSTCITY, CUSTSTATE, CUSTZIP, CUSTBAL) VALUES("C1010398", "Jim", "Clussman", "Denver", "CO", "80111-0033", 200.00);
INSERT INTO CUSTOMER (CUSTNO, CUSTFNAME, CUSTLNAME, CUSTCITY, CUSTSTATE, CUSTZIP, CUSTBAL) VALUES("C2388597", "Beth", "Taylor", "Seattle", "WA", "98103-1121", 500.00);
INSERT INTO CUSTOMER (CUSTNO, CUSTFNAME, CUSTLNAME, CUSTCITY, CUSTSTATE, CUSTZIP, CUSTBAL) VALUES("C3340959", "Betty", "Wise", "Seattle", "WA", "98178-3311", 200.00);
INSERT INTO CUSTOMER (CUSTNO, CUSTFNAME, CUSTLNAME, CUSTCITY, CUSTSTATE, CUSTZIP, CUSTBAL) VALUES("C3499503", "Bob", "Mann", "Monroe", "WA", "98013-1095", 0.00);
INSERT INTO CUSTOMER (CUSTNO, CUSTFNAME, CUSTLNAME, CUSTCITY, CUSTSTATE, CUSTZIP, CUSTBAL) VALUES("C8543321", "Ron", "Thompson", "Renton", "WA", "98666-1289", 85.00);

-- Mostrar tabla cliente
DESCRIBE CUSTOMER;

-- Crear tabla Empleado
CREATE TABLE EMPLOYEE(
	EMPNO			CHAR(8),
    EMPFNAME		VARCHAR(50) NOT NULL,
    EMPLNAME		VARCHAR(50) NOT NULL,
    EMPPHONE		CHAR(20),
    EMPEMAIL		VARCHAR(40) NOT NULL,
    CONSTRAINT EMPNO PRIMARY KEY (EMPNO)
);

INSERT INTO EMPLOYEE (EMPNO, EMPFNAME, EMPLNAME, EMPPHONE, EMPEMAIL) VALUES ("E1329594", "Landi", "Santos", "(303) 789-1234", "LSantos@bigco.com");
INSERT INTO EMPLOYEE (EMPNO, EMPFNAME, EMPLNAME, EMPPHONE, EMPEMAIL) VALUES ("E8544399", "Joe", "Jenkins", "(303) 221-9875", "JJenkins@bigco.com");
INSERT INTO EMPLOYEE (EMPNO, EMPFNAME, EMPLNAME, EMPPHONE, EMPEMAIL) VALUES ("E8843211", "Amy", "Tang", "(303) 556-4321", "Atang@bigco.com");
INSERT INTO EMPLOYEE (EMPNO, EMPFNAME, EMPLNAME, EMPPHONE, EMPEMAIL) VALUES ("E9345771", "Colin", "White", "(303) 221-4453", "CWhite@bigco.com");
INSERT INTO EMPLOYEE (EMPNO, EMPFNAME, EMPLNAME, EMPPHONE, EMPEMAIL) VALUES ("E9884325", "Thomas", "Johnson", "(303) 556-9987", "TJohnson@bigco.com");
INSERT INTO EMPLOYEE (EMPNO, EMPFNAME, EMPLNAME, EMPPHONE, EMPEMAIL) VALUES ("E9954302", "MAry", "Hill", "(303) 556-9871", "MHill@bigco.com");

-- Mostrar tabla empleado
DESCRIBE EMPLOYEE;

-- Crear tabla Order table
CREATE TABLE ODRTBL(
	ORDNO			CHAR(8),
    ORDDATE			DATE,
    CUSTNO			CHAR(8),
    EMPNO			CHAR(8) not null,
    CONSTRAINT ORDNO PRIMARY KEY (ORDNO)
);

-- Insertar datos a la tabla
INSERT INTO ODRTBL (ORDNO, ORDDATE, CUSTNO, EMPNO) VALUES ("O1116324", str_to_date("d/m/y", "01/23/2013"), "C0954327", "E8544399");
INSERT INTO ODRTBL (ORDNO, ORDDATE, CUSTNO, EMPNO) VALUES ("O2334661", str_to_date("d/m/y", "01/14/2013"), "C0954327", "E1329594");
INSERT INTO ODRTBL (ORDNO, ORDDATE, CUSTNO, EMPNO) VALUES ("O3331222", str_to_date("d/m/y", "01/13/2013"), "C1010398", "E8544399");
INSERT INTO ODRTBL (ORDNO, ORDDATE, CUSTNO, EMPNO) VALUES ("O2233457", str_to_date("d/m/y", "01/12/2013"), "C2388597", "E9884325");
INSERT INTO ODRTBL (ORDNO, ORDDATE, CUSTNO, EMPNO) VALUES ("O4714645", str_to_date("d/m/y", "01/11/2013"), "C2388597", "E1329594");
INSERT INTO ODRTBL (ORDNO, ORDDATE, CUSTNO, EMPNO) VALUES ("O5511365", str_to_date("d/m/y", "01/22/2013"), "C3340959", "E9884325");
INSERT INTO ODRTBL (ORDNO, ORDDATE, CUSTNO, EMPNO) VALUES ("O7989497", str_to_date("d/m/y", "01/16/2013"), "C3499503", "E9345771");
INSERT INTO ODRTBL (ORDNO, ORDDATE, CUSTNO, EMPNO) VALUES ("O1656777", str_to_date("d/m/y", "02/11/2013"), "C8543321", "E8544399");
INSERT INTO ODRTBL (ORDNO, ORDDATE, CUSTNO, EMPNO) VALUES ("O7959898", str_to_date("d/m/y", "02/19/2013"), "C8543321", "E8544399");

-- Mostrar tabla Order table
DESCRIBE ODRTBL;

-- Relación entre las tablas ODRTBL - Cliente
ALTER TABLE ODRTBL ADD CONSTRAINT ORDTBL_CUSTOMER_CUSTNO FOREIGN KEY (CUSTNO) REFERENCES CUSTOMER(CUSTNO);

-- Relación entre las tablas ODRTBL - Empleado
ALTER TABLE ODRTBL ADD CONSTRAINT ORDTBL_EMPLOYEE_EMPNO FOREIGN KEY (EMPNO) REFERENCES EMPLOYEE(EMPNO);